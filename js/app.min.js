(() => { "use strict"; const e = document.querySelector(".them span"); function t() { if (null !== localStorage.getItem("theam")) return document.documentElement.classList.add("dark"), void (e.textContent = "dark_mode"); document.documentElement.classList.remove("dark"), e.textContent = "light_mode" } document.querySelector(".material-symbols-outlined").addEventListener("click", (() => { "dark" !== localStorage.getItem("theam") ? localStorage.setItem("theam", "dark") : localStorage.removeItem("theam"), t() })), t(); const n = e => { document.cookie = `error = ${e}; max-age=5`, window.location.href = "error.html" }, a = document.querySelector(".wrapper"), o = document.createElement("div"), c = document.createElement("div"); o.classList = "loader__box", c.classList = "loader", o.append(c); const i = () => { setTimeout((() => { document.body.removeChild(o), a.style.display = "flex" }), 1500) }, r = async e => { document.body.append(o), a.style.display = "none"; try { const t = await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=1&appid=08fe83ee05a40d996d9ba1902799c2df`), a = await t.json(); if (a?.cod) return void n(a.cod); if (0 != a.length) return a[0]; i(), setTimeout((() => { alert("Такого міста не існує або його немає на сервері") }), 2e3) } catch (e) { n() } }; moment.locale("uk"); const s = function (e, t) { return moment(1e3 * e).tz(t).format("ddd") }, d = function (e, t) { return moment(1e3 * e).tz(t).format("LT") }; !function (e) { let t = new Image; t.onload = t.onerror = function () { !function (e) { let t = !0 === e ? "webp" : "no-webp"; document.documentElement.classList.add(t) }(2 == t.height) }, t.src = "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA" }(), navigator.cookieEnabled || alert("Для належної роботи сайту необхідно ввімкнути файли Cookie"); const l = document.querySelector(".svg-geolocation-dims"), m = document.querySelector("input"), u = document.querySelector(".columns"), p = new Object; async function h() { m.value && (w(await r(m.value)), m.value = "") } async function w(e) { if (e) { try { let { lat: t, lon: a } = e, o = await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${t}&lon=${a}&exclude=hourly,&units=metric&lang=uk&appid=9de243494c0b295cca9337e1e96b00e2`), c = await o.json(); if (c?.cod) return void n(c.cod); p.api = { ...e, ...c } } catch { n() } i(), y() } } function f(e) { let t = "#imperial" === window.location.hash ? 1.8 * e + 32 : e; return Math.round(t) } window.addEventListener("load", (async function () { w(await (async () => { try { let e = await fetch("https://ipapi.co/json/"), t = await e.json(); return t.error && n(), r(t.city) } catch (e) { n() } })()) })), l.addEventListener("click", h), document.addEventListener("keydown", (e => { "Enter" === e.key && h() })), document.querySelector("ul").addEventListener("click", (e => { let t = window.location.pathname; if (e.target.classList.contains("fahrenheit")) t += "#imperial", document.querySelector("header").classList.add("color"); else { if (!e.target.classList.contains("celsius")) return; t += "#metric", document.querySelector("header").classList.remove("color") } location.assign(t), y() })); const y = () => { !function () { let e = "", t = 0, { daily: n, timezone: a } = p.api; for (const o of n) { if (7 == t++) break; e += ` <div class="columns-items">\n      <div class="columns-content">\n         <div class="content-titel">\n            <h2> ${s(o.dt, a)}</h2>\n         </div>\n         <div class="content-image">\n         <img src="img/${o.weather[0].icon.substring(0, 2)}.png" alt="weather"></img>\n         </div>\n         <div class="content-temperature">\n               <div class="tempmax">${f(o.temp.day)}<span>°</span></div>\n                 <div class="tempmin">${f(o.temp.min)}<span>°</span></div>\n              </div>\n         </div>\n      </div>` } u.innerHTML = e }(), function () { const { current: e, timezone: t } = p.api; document.querySelectorAll("#uv, #wind, #humidity, #pressure, #clouds, #sunrise, #sunset").forEach((n => { switch (n.id) { case "uv": n.textContent = e.uvi; break; case "wind": n.textContent = e.wind_speed; break; case "humidity": n.textContent = e.humidity; break; case "pressure": n.textContent = e.pressure; break; case "clouds": n.textContent = e.clouds; break; case "sunrise": n.textContent = d(e.sunrise, t); break; case "sunset": n.textContent = d(e.sunset, t) } })) }(), function () { const e = document.querySelectorAll(".weather-icon,.city,.date,.temperature,.description,.time span"), { current: t, local_names: n, timezone: a, name: o } = p.api; let c = "#imperial" == window.location.hash ? "°F" : "°C"; e.forEach((e => { switch (e.className) { case "weather-icon": e.innerHTML = `<img src="img/${t.weather[0].icon.substring(0, 2)}.png" alt="weather"></img>`; break; case "city": e.textContent = n && n.uk ? n.uk : o; break; case "date": e.textContent = function (e, t) { return moment(1e3 * e).tz(t).format("dddd, DD MMMM") }(t.dt, a); break; case "temperature": e.textContent = f(t.temp) + c; break; case "description": e.textContent = t.weather[0].description; break; case "time": e.textContent = d(t.dt, a) } })) }() } })();